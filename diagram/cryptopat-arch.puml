@startuml CryptoPat High-Level Architecture

!theme blueprint
!define DIRECTION left to right direction
left to right direction
title CryptoPat - High-Level System Architecture

package "User Interface Layer" {
  [CLI Interface] as CLI
  note right of CLI : Interactive command-line\nFormat: s=SYMBOL t=TIMEFRAME l=LIMIT
}

package "Core Orchestration" {
  [CryptoPat CLI Controller] as Controller
  note right of Controller : Main application controller\nParses commands, coordinates analysis
}

package "Data Collection Layer" {
  [DataCollector Singleton] as DataCollector
  [OHLCV Fetcher] as OHLCV
  [Order Book Fetcher] as OrderBook
  [Ticker Fetcher] as Ticker
  [Trades Fetcher] as Trades
  
  DataCollector --> OHLCV
  DataCollector --> OrderBook
  DataCollector --> Ticker
  DataCollector --> Trades
  
  note right of DataCollector : Singleton pattern\nManages exchange connections\nDefault: Binance via CCXT
}

package "External Services" {
  [Cryptocurrency Exchange] as Exchange
  note right of Exchange : Binance (default)\nExtensible via CCXT
}

package "Technical Analysis Engine" {
  [Technical Indicators] as Indicators
  [MACD] as MACD
  [RSI] as RSI
  [Bollinger Bands] as BB
  [Ichimoku Cloud] as Ichimoku
  [VWAP] as VWAP
  [SuperTrend] as SuperTrend
  [EMA 20/50] as EMA
  [Parabolic SAR] as PSAR
  [... 6 more indicators] as Others
  
  Indicators --> MACD
  Indicators --> RSI
  Indicators --> BB
  Indicators --> Ichimoku
  Indicators --> VWAP
  Indicators --> SuperTrend
  Indicators --> EMA
  Indicators --> PSAR
  Indicators --> Others
  
  note right of Indicators : 14+ modular indicators\nParallel execution via ThreadPoolExecutor\nTimeframe-adaptive parameters
}

package "Analysis Framework" {
  [Analysis Summarizer] as Analyzer
  [Signal Aggregator] as Aggregator
  [Result Formatter] as Formatter
  
  Analyzer --> Aggregator
  Analyzer --> Formatter
  
  note right of Analyzer : Weighted consensus methodology\nAcademic research-based\nSignal classification & clustering
}

package "Configuration System" {
  [Config Loader] as ConfigLoader
  [indicators.yaml] as Config
  
  ConfigLoader --> Config
  
  note right of Config : Timeframe-specific parameters\n1d, 1w, 1M configurations
}

package "Data Storage" {
  [CSV Exports] as CSV
  note right of CSV : Optional data export\nOHLCV, OrderBook, Ticker, Trades
}

' Main data flow
CLI --> Controller
Controller --> DataCollector
DataCollector --> Exchange
DataCollector --> Indicators
ConfigLoader --> Indicators
Indicators --> Analyzer
Analyzer --> Controller
Controller --> CLI

' Optional data export
DataCollector --> CSV

' Configuration flow
ConfigLoader --> Controller

skinparam component {
  BackgroundColor<<core>> LightBlue
  BackgroundColor<<data>> LightGreen
  BackgroundColor<<analysis>> LightYellow
  BackgroundColor<<config>> LightPink
}

@enduml